{"ast":null,"code":"var _jsxFileName = \"/Users/akash/Desktop/untitled folder/my_component/frontend/src/components/GraphView.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Xarrow from 'react-xarrows';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Button from '@mui/material/Button';\nimport { styled } from '@mui/material/styles';\nimport StyledBootstrapDialogTitle from \"./StyledBootstrapDialogTitle\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\nimport MuiAccordion from '@mui/material/Accordion';\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\nimport PropTypes from 'prop-types';\nimport { ClipLoader } from 'react-spinners';\nimport './GraphView.css';\nimport UserRoleAssigner from \"./UserRoleAssigner\";\nimport { assignUser, revokeUser } from \"../redux/mainStore\";\nimport { ModalStyledButton } from \"./ModalStyledButton\";\nimport axios from \"axios\";\nconst BootstrapDialog = styled(Dialog)(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    '& .MuiDialogContent-root': {\n      padding: theme.spacing(2)\n    },\n    '& .MuiDialogActions-root': {\n      padding: theme.spacing(1)\n    } //  ' .MuiDialogTitle-root': {\n    //   margin: \"auto\", fontWeight: \"600\"\n    // }, ' .MuiTypography-body2': {\n    //   fontWeight: \"700\"\n    // }\n\n  };\n}); // const StyledBootstrapDialogTitle = (props) => {\n//   const {children, onClose, ...other} = props;\n//   return (<DialogTitle sx={{m: 0, p: 2}} {...other}>\n//       {children}\n//       {onClose ? (<IconButton\n//           aria-label=\"close\"\n//           onClick={onClose}\n//           sx={{\n//             position: 'absolute', right: 8, top: 8, color: (theme) => theme.palette.grey[500],\n//           }}\n//         >\n//           <CloseIcon/>\n//         </IconButton>) : null}\n//     </DialogTitle>);\n// };\n// StyledBootstrapDialogTitle.propTypes = {\n//   children: PropTypes.node, onClose: PropTypes.func.isRequired,\n// };\n\nconst Accordion = styled(props => /*#__PURE__*/React.createElement(MuiAccordion, Object.assign({\n  disableGutters: true,\n  elevation: 0,\n  square: true\n}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 38\n  }\n})))(_ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return {\n    border: `1px solid ${theme.palette.divider}`,\n    '&:not(:last-child)': {\n      borderBottom: 0\n    },\n    '&:before': {\n      display: 'none'\n    }\n  };\n});\nconst AccordionSummary = styled(props => /*#__PURE__*/React.createElement(MuiAccordionSummary, Object.assign({\n  expandIcon: /*#__PURE__*/React.createElement(ArrowForwardIosSharpIcon, {\n    sx: {\n      fontSize: '0.9rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  })\n}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 45\n  }\n})))(_ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return {\n    backgroundColor: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, .05)' : 'rgba(0, 0, 0, .03)',\n    flexDirection: 'row-reverse',\n    '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\n      transform: 'rotate(90deg)'\n    },\n    '& .MuiAccordionSummary-content': {\n      marginLeft: theme.spacing(1)\n    }\n  };\n});\nconst AccordionDetails = styled(MuiAccordionDetails)(_ref4 => {\n  let {\n    theme\n  } = _ref4;\n  return {\n    padding: theme.spacing(2),\n    borderTop: '1px solid rgba(0, 0, 0, .125)'\n  };\n});\n\nfunction GraphView(_ref5) {\n  let {\n    nodes,\n    edges,\n    warehouses\n  } = _ref5;\n  const ColorButton = styled(Button)(() => ({\n    // color: theme.palette.getContrastText(purple[500]),\n    backgroundColor: \"#146356\",\n    borderRadius: \"12px\",\n    '&:hover': {\n      backgroundColor: \"#115549\"\n    }\n  }));\n  const {\n    userRoles,\n    allUsers,\n    isLoadingTree\n  } = useSelector(state => state.mainSlice);\n  const dispatch = useDispatch();\n  const [token, setToken] = React.useState(null);\n  const [uniqueLevels, setUniqueLevels] = React.useState([]);\n  const [rowWidth, setRowWidth] = React.useState(\"100px\");\n  const [encodedClientId, setEncodedClientId] = React.useState(null);\n  const [encodedRedirectUri, setEncodedRedirectUri] = React.useState(null);\n  const [encodedClientSecret, setEncodedClientSecret] = React.useState(null);\n  const [selectedNode, setSelectedNode] = React.useState(null);\n  const [hoveredNode, setHoveredNode] = React.useState(null);\n  const [hoveredEdge, setHoveredEdge] = React.useState(null);\n  const [selectedNodeChildren, setSelectedNodeChildren] = useState([]);\n  const [selectedNodeParents, setSelectedNodeParents] = useState([]);\n  const [selectedNodeUsers, setSelectedNodeUsers] = useState([]);\n  const [openViewRole, setopenViewRole] = React.useState(false);\n  const [expandedAccordion, setExpandedAccordion] = React.useState('panel1');\n  const [openRoleAssigner, setOpenRoleAssigner] = React.useState(false);\n  const [nodeDetailsLoading, setNodeDetailsLoading] = React.useState(false);\n\n  const handleChangeAccordion = panel => (event, newExpanded) => {\n    setExpandedAccordion(newExpanded ? panel : false);\n  };\n\n  const getSelectedNodeUsers = node => {\n    setNodeDetailsLoading(true);\n    axios({\n      method: 'post',\n      url: 'https://ldzg5qeyo4.execute-api.ap-south-1.amazonaws.com/dev/return_users_of_role/',\n      data: {\n        \"data\": [node.label]\n      },\n      headers: {\n        // 'Authorization': `bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      setNodeDetailsLoading(false);\n      console.log(\"Get users of role response :\", response);\n\n      if (response.data.flag == 1) {\n        setSelectedNodeUsers(response.data.response);\n      }\n    }).catch(error => {\n      setNodeDetailsLoading(false);\n      console.log(error);\n      alert(error);\n      alert(\"Could not fetch users of the role\");\n    });\n  };\n\n  const nodeOnClick = node => {\n    console.log(node);\n    setSelectedNode(node);\n    setopenViewRole(true);\n    var children = edges.filter(edge => edge.source === node.label).map(e => e.target);\n    console.log(\"Children are : \", children);\n    setSelectedNodeChildren(children);\n    var parents = edges.filter(edge => edge.target === node.label && edge.source != \"NULL\").map(e => e.source);\n    console.log(\"Parents are : \", parents);\n    setSelectedNodeParents(parents);\n    getSelectedNodeUsers(node);\n  };\n\n  const getChildrenInLevelN = (node, index) => {\n    var children = edges.filter(edge => {\n      return edge.source === node;\n    }).map(e => e.target);\n    console.log(\"children of \", node, \"are :\", children);\n    var childrenInLevelN = nodes.filter(Node => {\n      return children.includes(Node.label) && Node.level === index;\n    });\n    console.log(\"childrenInLevelN are :\", childrenInLevelN);\n    return childrenInLevelN;\n  };\n\n  const renderNodesInLevel = index => {\n    // console.log(\"in level :\", index)\n    var result = [];\n    var _nodes = [];\n\n    if (index > 0) {\n      nodes.filter(n => n.level === index - 1).map(n => {\n        console.log(\"for node n:\", n);\n        var a = getChildrenInLevelN(n.label, index);\n        _nodes = [..._nodes, ...a];\n      });\n    } else {\n      _nodes = nodes.filter(_n => _n.level === 0);\n    }\n\n    _nodes = nodes.filter(_n => _n.level === index);\n\n    _nodes.map(n => {\n      result.push( /*#__PURE__*/React.createElement(\"div\", {\n        className: \"node\",\n        id: n.id + \"DIv\",\n        style: {\n          width: \"max-content\",\n          borderRadius: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ColorButton, {\n        id: n.id,\n        onClick: () => nodeOnClick(n),\n        onMouseEnter: () => setHoveredNode(n),\n        onMouseLeave: () => setHoveredNode(null),\n        style: {\n          color: \"white\",\n          textTransform: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }\n      }, n.label)));\n    });\n\n    return result;\n  };\n\n  const recursiveFind = (array, search) => {\n    var result = [];\n    array.map(node => {\n      if (node === search) {\n        result.push(node);\n      }\n\n      if (node.children) {\n        var a = recursiveFind(node.children, search);\n        result = [...result, ...a];\n      }\n    });\n    return result;\n  };\n\n  const handleCloseRoleAssigner = () => {\n    setOpenRoleAssigner(false);\n  };\n\n  const countAllChildrenBelowNode = node => {\n    let count = [];\n    let children = edges.filter(edge => {\n      return edge.source === node;\n    }).map(e => e.target);\n    children.map(child => {\n      if (!count.includes(child)) {\n        count = [...count, ...countAllChildrenBelowNode(child)];\n      }\n    });\n    count = [...count, ...children];\n    return [...new Set(count)];\n  };\n\n  const countAllChildrenBelowLevel = level => {\n    let count = [];\n    nodes.filter(n => n.level === level).map(n => {\n      count = [...count, ...countAllChildrenBelowNode(n.label)];\n    });\n    return [...new Set(count)];\n  };\n\n  const groupNodesInLevel = level => {\n    if (level === 0) {\n      let _nodes = nodes.filter(node => node.level === level);\n\n      let result = [];\n\n      _nodes.map(node => {\n        result.push({\n          node: { ...node\n          },\n          index: _nodes.findIndex(n => n.level === level)\n        });\n      });\n\n      return result;\n    }\n\n    let result = [];\n    let indexes = [];\n    let nodesInLevel = nodes.filter(node => node.level === level);\n    nodesInLevel.map(node => {\n      let parents = edges.filter(edge => edge.target === node.label);\n      let nodesInLevelAbove = nodes.filter(node => node.level === level - 1);\n      let parentIndex = 0;\n      parents.map(parent => {\n        parentIndex += groupNodesInLevel(level - 1).findIndex(node => node.node.label === parent.source);\n      });\n      parentIndex = parentIndex / parents.length;\n      indexes.push({\n        node: { ...node\n        },\n        index: parentIndex\n      });\n    });\n    indexes.sort((a, b) => a.index - b.index);\n    return indexes;\n  };\n\n  const addNodeWidths = level => {\n    if (level === 0) {\n      const _nodes = groupNodesInLevel(level);\n\n      let result = [];\n\n      _nodes.map(node => {\n        result.push({ ...node,\n          width: (countAllChildrenBelowNode(node.label).length + 1) * 100 / (countAllChildrenBelowLevel(level).length + _nodes.length)\n        });\n      });\n\n      return result;\n    }\n\n    const _nodes = groupNodesInLevel(level);\n\n    let result = [];\n\n    _nodes.map(node => {\n      result.push({ ...node,\n        width: (countAllChildrenBelowNode(node.node.label).length + 1) * 100 / (countAllChildrenBelowLevel(level).length + _nodes.length)\n      });\n    });\n\n    return result;\n  };\n\n  const displayNodesInLevel = level => {\n    const _nodes = addNodeWidths(level);\n\n    const result = [];\n\n    _nodes.map(index => {\n      result.push( /*#__PURE__*/React.createElement(\"div\", {\n        className: \"node\",\n        id: index.node.id + \"DIv\",\n        style: {\n          width: index.width + \"%\",\n          borderRadius: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(ColorButton, {\n        className: \"rbac__node\",\n        id: index.node.id,\n        onClick: () => nodeOnClick(index.node),\n        onMouseEnter: () => setHoveredNode(index.node),\n        onMouseLeave: () => setHoveredNode(null),\n        style: {\n          color: \"white\",\n          textTransform: 'none',\n          zIndex: \"2\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 9\n        }\n      }, index.node.label)));\n    });\n\n    return result;\n  };\n\n  const renderNodes = uniqueLevels.map(l => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      id: \"row\" + l,\n      style: {\n        width: `${rowWidth}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 13\n      }\n    }, displayNodesInLevel(l));\n  });\n\n  const getEdgeColor = edge => {\n    if (hoveredEdge != null && hoveredEdge.id === edge.id) {\n      return \"#0d4037\";\n    } else if (hoveredNode != null) {\n      if (hoveredNode.label === edge.source || hoveredNode.label === edge.target) {\n        return \"#0d4037\";\n      }\n    }\n\n    return \"lightgray\";\n  };\n\n  const getZIndex = edge => {\n    if (hoveredEdge != null && hoveredEdge.id === edge.id) {\n      return 1;\n    } else if (hoveredNode != null) {\n      if (hoveredNode.label === edge.source || hoveredNode.label === edge.target) {\n        return 1;\n      }\n    }\n\n    return 0;\n  };\n\n  const displayEdges = edges.filter(edge => {\n    return edge.source !== \"NULL\" && edge.target !== \"NULL\";\n  }).map((edge, index) => {\n    // console.log(edge)\n    return /*#__PURE__*/React.createElement(Xarrow, {\n      key: Math.random(),\n      id: edge.id // arrow is purposefully kept from end to start due to snowflake use case\n      ,\n      end: edge.source //can be react ref or an id\n      ,\n      start: edge.target,\n      startAnchor: \"top\",\n      endAnchor: \"bottom\",\n      color: getEdgeColor(edge),\n      strokeWidth: 3,\n      path: \"curve\",\n      zIndex: getZIndex(edge),\n      passProps: {\n        cursor: \"pointer\" // onMouseEnter: () => setHoveredEdge(edge),\n        // onMouseLeave: () => setHoveredEdge(null)\n\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 13\n      }\n    });\n  });\n  useEffect(() => {\n    var _uniqueLevels = [...new Set(nodes.map(node => node.level))].filter(item => item !== -1).sort();\n\n    var _uniqueLevelsLength = _uniqueLevels.length;\n    console.log(\"_uniqueLevels : \", _uniqueLevels);\n    setUniqueLevels(_uniqueLevels);\n    const arr = nodes.map(n => n.level);\n    const counts = arr.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\n    var countsArr = [...counts.values()];\n    setRowWidth(Math.max(...countsArr) * 236 + 10 + \"px\");\n  }, [nodes, edges]);\n\n  const handleCloseViewRole = () => {\n    setopenViewRole(false);\n    setSelectedNode(null);\n    setHoveredNode(null);\n  };\n\n  const displayParentsOrChildrenOrUsers = nodesArray => nodesArray.map(node => {\n    return /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 13\n      }\n    }, node);\n  });\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    style: {\n      border: \"3px solid grey\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 5\n    }\n  }, !isLoadingTree ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-around\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 11\n    }\n  }, \"Refresh\"), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 11\n    }\n  }, \"Download\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gridContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 13\n    }\n  }, renderNodes, displayEdges)) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"100vh\",\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ClipLoader, {\n    color: \"#B2D942\",\n    size: 150,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(BootstrapDialog, {\n    \"aria-labelledby\": \"customized-dialog-title\",\n    PaperProps: {\n      style: {\n        width: \"800px\",\n        height: \"400px\"\n      }\n    },\n    onClose: handleCloseViewRole,\n    open: openViewRole,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(StyledBootstrapDialogTitle, {\n    id: \"customized-dialog-title\",\n    onClose: handleCloseViewRole,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }\n  }, selectedNode && selectedNode.label), /*#__PURE__*/React.createElement(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }\n  }, nodeDetailsLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ClipLoader, {\n    color: \"#B2D942\",\n    size: 150,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Accordion, {\n    expanded: expandedAccordion === 'parents',\n    onChange: handleChangeAccordion('parents'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AccordionSummary, {\n    \"aria-controls\": \"panel1d-content\",\n    id: \"panel1d-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 15\n    }\n  }, \"Granted to Roles (Parents) : \", selectedNodeParents.length)), /*#__PURE__*/React.createElement(AccordionDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 13\n    }\n  }, displayParentsOrChildrenOrUsers(selectedNodeParents))), /*#__PURE__*/React.createElement(Accordion, {\n    expanded: expandedAccordion === 'children',\n    onChange: handleChangeAccordion('children'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AccordionSummary, {\n    \"aria-controls\": \"panel1d-content\",\n    id: \"panel1d-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 15\n    }\n  }, \"Granted Roles (Children) : \", selectedNodeChildren.length)), /*#__PURE__*/React.createElement(AccordionDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 13\n    }\n  }, displayParentsOrChildrenOrUsers(selectedNodeChildren))), /*#__PURE__*/React.createElement(Accordion, {\n    expanded: expandedAccordion === 'users',\n    onChange: handleChangeAccordion('users'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AccordionSummary, {\n    \"aria-controls\": \"panel1d-content\",\n    id: \"panel1d-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 15\n    }\n  }, \"Granted Users : \", selectedNodeUsers.length)), /*#__PURE__*/React.createElement(AccordionDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 13\n    }\n  }, displayParentsOrChildrenOrUsers(selectedNodeUsers))))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ModalStyledButton, {\n    autoFocus: true,\n    onClick: handleCloseViewRole,\n    type: \"cancel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 11\n    }\n  }, \"Close\"))), /*#__PURE__*/React.createElement(BootstrapDialog, {\n    onClose: handleCloseRoleAssigner,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: openRoleAssigner,\n    PaperProps: {\n      style: {}\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StyledBootstrapDialogTitle, {\n    id: \"customized-dialog-title\",\n    onClose: handleCloseRoleAssigner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }\n  }, \"Assign User to \", selectedNode && selectedNode.value), /*#__PURE__*/React.createElement(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"0px 56px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UserRoleAssigner, {\n    dispatch: dispatch,\n    allUsers: allUsers,\n    userRoles: userRoles,\n    assignUser: assignUser,\n    revokeUser: revokeUser,\n    selectedNode: selectedNode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalStyledButton, {\n    autoFocus: true,\n    onClick: handleCloseRoleAssigner,\n    type: \"cancel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 9\n    }\n  }, \"Close\"))));\n}\n\nexport default GraphView;","map":{"version":3,"names":["React","useEffect","useState","Xarrow","useDispatch","useSelector","Button","styled","StyledBootstrapDialogTitle","Dialog","DialogTitle","DialogContent","DialogActions","IconButton","CloseIcon","Typography","ArrowForwardIosSharpIcon","MuiAccordion","MuiAccordionSummary","MuiAccordionDetails","PropTypes","ClipLoader","UserRoleAssigner","assignUser","revokeUser","ModalStyledButton","axios","BootstrapDialog","theme","padding","spacing","Accordion","props","border","palette","divider","borderBottom","display","AccordionSummary","fontSize","backgroundColor","mode","flexDirection","transform","marginLeft","AccordionDetails","borderTop","GraphView","nodes","edges","warehouses","ColorButton","borderRadius","userRoles","allUsers","isLoadingTree","state","mainSlice","dispatch","token","setToken","uniqueLevels","setUniqueLevels","rowWidth","setRowWidth","encodedClientId","setEncodedClientId","encodedRedirectUri","setEncodedRedirectUri","encodedClientSecret","setEncodedClientSecret","selectedNode","setSelectedNode","hoveredNode","setHoveredNode","hoveredEdge","setHoveredEdge","selectedNodeChildren","setSelectedNodeChildren","selectedNodeParents","setSelectedNodeParents","selectedNodeUsers","setSelectedNodeUsers","openViewRole","setopenViewRole","expandedAccordion","setExpandedAccordion","openRoleAssigner","setOpenRoleAssigner","nodeDetailsLoading","setNodeDetailsLoading","handleChangeAccordion","panel","event","newExpanded","getSelectedNodeUsers","node","method","url","data","label","headers","then","response","console","log","flag","catch","error","alert","nodeOnClick","children","filter","edge","source","map","e","target","parents","getChildrenInLevelN","index","childrenInLevelN","Node","includes","level","renderNodesInLevel","result","_nodes","n","a","_n","push","id","width","color","textTransform","recursiveFind","array","search","handleCloseRoleAssigner","countAllChildrenBelowNode","count","child","Set","countAllChildrenBelowLevel","groupNodesInLevel","findIndex","indexes","nodesInLevel","nodesInLevelAbove","parentIndex","parent","length","sort","b","addNodeWidths","displayNodesInLevel","zIndex","renderNodes","l","getEdgeColor","getZIndex","displayEdges","Math","random","cursor","_uniqueLevels","item","_uniqueLevelsLength","arr","counts","reduce","acc","set","get","Map","countsArr","values","max","handleCloseViewRole","displayParentsOrChildrenOrUsers","nodesArray","justifyContent","height","alignItems","style","value"],"sources":["/Users/akash/Desktop/untitled folder/my_component/frontend/src/components/GraphView.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\"\r\nimport Xarrow from 'react-xarrows';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport Button from '@mui/material/Button';\r\nimport {styled} from '@mui/material/styles';\r\nimport StyledBootstrapDialogTitle from \"./StyledBootstrapDialogTitle\";\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport Typography from '@mui/material/Typography';\r\nimport ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\r\nimport MuiAccordion from '@mui/material/Accordion';\r\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\r\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\r\nimport PropTypes from 'prop-types';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport './GraphView.css';\r\nimport UserRoleAssigner from \"./UserRoleAssigner\";\r\nimport {assignUser, revokeUser} from \"../redux/mainStore\";\r\nimport {ModalStyledButton} from \"./ModalStyledButton\";\r\nimport axios from \"axios\";\r\n\r\nconst BootstrapDialog = styled(Dialog)(({theme}) => ({\r\n  '& .MuiDialogContent-root': {\r\n    padding: theme.spacing(2),\r\n  }, '& .MuiDialogActions-root': {\r\n    padding: theme.spacing(1),\r\n  },\r\n  //  ' .MuiDialogTitle-root': {\r\n  //   margin: \"auto\", fontWeight: \"600\"\r\n  // }, ' .MuiTypography-body2': {\r\n  //   fontWeight: \"700\"\r\n  // }\r\n}));\r\n\r\n// const StyledBootstrapDialogTitle = (props) => {\r\n//   const {children, onClose, ...other} = props;\r\n\r\n//   return (<DialogTitle sx={{m: 0, p: 2}} {...other}>\r\n//       {children}\r\n//       {onClose ? (<IconButton\r\n//           aria-label=\"close\"\r\n//           onClick={onClose}\r\n//           sx={{\r\n//             position: 'absolute', right: 8, top: 8, color: (theme) => theme.palette.grey[500],\r\n//           }}\r\n//         >\r\n//           <CloseIcon/>\r\n//         </IconButton>) : null}\r\n//     </DialogTitle>);\r\n// };\r\n\r\n// StyledBootstrapDialogTitle.propTypes = {\r\n//   children: PropTypes.node, onClose: PropTypes.func.isRequired,\r\n// };\r\n\r\nconst Accordion = styled((props) => (<MuiAccordion disableGutters elevation={0} square {...props} />))(({theme}) => ({\r\n  border: `1px solid ${theme.palette.divider}`, '&:not(:last-child)': {\r\n    borderBottom: 0,\r\n  }, '&:before': {\r\n    display: 'none',\r\n  },\r\n}));\r\n\r\nconst AccordionSummary = styled((props) => (<MuiAccordionSummary\r\n  expandIcon={<ArrowForwardIosSharpIcon sx={{fontSize: '0.9rem'}}/>}\r\n  {...props}\r\n/>))(({theme}) => ({\r\n  backgroundColor: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, .05)' : 'rgba(0, 0, 0, .03)',\r\n  flexDirection: 'row-reverse',\r\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\r\n    transform: 'rotate(90deg)',\r\n  },\r\n  '& .MuiAccordionSummary-content': {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst AccordionDetails = styled(MuiAccordionDetails)(({theme}) => ({\r\n  padding: theme.spacing(2), borderTop: '1px solid rgba(0, 0, 0, .125)',\r\n}));\r\n\r\n\r\nfunction GraphView({nodes,edges,warehouses}) {\r\n\r\n  const ColorButton = styled(Button)(() => ({\r\n    // color: theme.palette.getContrastText(purple[500]),\r\n    backgroundColor: \"#146356\", borderRadius: \"12px\", '&:hover': {\r\n      backgroundColor: \"#115549\",\r\n    },\r\n  }));\r\n\r\n  const {userRoles, allUsers, isLoadingTree} = useSelector(state => state.mainSlice);\r\n  const dispatch = useDispatch();\r\n\r\n  const [token, setToken] = React.useState(null);\r\n  const [uniqueLevels, setUniqueLevels] = React.useState([]);\r\n  const [rowWidth, setRowWidth] = React.useState(\"100px\");\r\n  const [encodedClientId, setEncodedClientId] = React.useState(null);\r\n  const [encodedRedirectUri, setEncodedRedirectUri] = React.useState(null);\r\n  const [encodedClientSecret, setEncodedClientSecret] = React.useState(null);\r\n  const [selectedNode, setSelectedNode] = React.useState(null)\r\n  const [hoveredNode, setHoveredNode] = React.useState(null)\r\n  const [hoveredEdge, setHoveredEdge] = React.useState(null)\r\n  const [selectedNodeChildren, setSelectedNodeChildren] = useState([])\r\n  const [selectedNodeParents, setSelectedNodeParents] = useState([])\r\n  const [selectedNodeUsers, setSelectedNodeUsers] = useState([])\r\n  const [openViewRole, setopenViewRole] = React.useState(false);\r\n  const [expandedAccordion, setExpandedAccordion] = React.useState('panel1');\r\n  const [openRoleAssigner, setOpenRoleAssigner] = React.useState(false);\r\n  const [nodeDetailsLoading, setNodeDetailsLoading] = React.useState(false);\r\n\r\n  const handleChangeAccordion = (panel) => (event, newExpanded) => {\r\n    setExpandedAccordion(newExpanded ? panel : false);\r\n  };\r\n\r\n  const getSelectedNodeUsers = (node)=>{\r\n    setNodeDetailsLoading(true)\r\n    axios({\r\n      method: 'post',\r\n      url: 'https://ldzg5qeyo4.execute-api.ap-south-1.amazonaws.com/dev/return_users_of_role/',\r\n      data: { \"data\":[\r\n          node.label\r\n        ]}\r\n      ,\r\n      headers: {\r\n        // 'Authorization': `bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    .then((response) => {\r\n      setNodeDetailsLoading(false)\r\n      console.log(\"Get users of role response :\", response);\r\n      if(response.data.flag==1){\r\n        setSelectedNodeUsers(response.data.response)\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      setNodeDetailsLoading(false)\r\n      console.log(error)\r\n      alert(error)\r\n      alert(\"Could not fetch users of the role\")\r\n    })\r\n  }\r\n\r\n  const nodeOnClick = (node) => {\r\n    console.log(node)\r\n    setSelectedNode(node)\r\n    setopenViewRole(true);\r\n    var children = edges.filter(edge => edge.source === node.label).map(e => e.target)\r\n    console.log(\"Children are : \", children)\r\n    setSelectedNodeChildren(children)\r\n    var parents = edges.filter(edge => (edge.target === node.label && edge.source!=\"NULL\")).map(e => e.source)\r\n    console.log(\"Parents are : \", parents)\r\n    setSelectedNodeParents(parents)\r\n    getSelectedNodeUsers(node)\r\n  }\r\n\r\n  const getChildrenInLevelN = (node, index) => {\r\n    var children = edges.filter(edge => {\r\n      return (edge.source === node)\r\n    }).map(e => e.target)\r\n    console.log(\"children of \", node, \"are :\", children)\r\n    var childrenInLevelN = nodes.filter(Node => {\r\n      return (children.includes(Node.label) && Node.level === index)\r\n    })\r\n    console.log(\"childrenInLevelN are :\", childrenInLevelN)\r\n    return (childrenInLevelN)\r\n  }\r\n\r\n  const renderNodesInLevel = (index) => {\r\n    // console.log(\"in level :\", index)\r\n    var result = [];\r\n    var _nodes = []\r\n    if (index > 0) {\r\n      nodes.filter(n => n.level === index - 1).map(n => {\r\n        console.log(\"for node n:\", n)\r\n        var a = getChildrenInLevelN(n.label, index)\r\n        _nodes = [..._nodes, ...a]\r\n\r\n      })\r\n    } else {\r\n      _nodes = nodes.filter(_n => _n.level === 0)\r\n    }\r\n    _nodes = nodes.filter(_n => _n.level === index)\r\n    _nodes.map(n => {\r\n      result.push(\r\n        <div className=\"node\" id={n.id + \"DIv\"} style={{\r\n          width: \"max-content\",\r\n          borderRadius: \"15px\"\r\n        }}>\r\n          <ColorButton\r\n            id={n.id}\r\n            onClick={() => nodeOnClick(n)}\r\n            onMouseEnter={() => setHoveredNode(n)}\r\n            onMouseLeave={() => setHoveredNode(null)}\r\n            style={{\r\n              color: \"white\", textTransform: 'none'\r\n            }}\r\n          >{n.label}</ColorButton>\r\n        </div>)\r\n    })\r\n    return result\r\n  }\r\n\r\n  const recursiveFind = (array, search) => {\r\n    var result = []\r\n    array.map(node => {\r\n      if (node === search) {\r\n        result.push(node)\r\n      }\r\n      if (node.children) {\r\n        var a = recursiveFind(node.children, search)\r\n        result = [...result, ...a]\r\n      }\r\n    })\r\n    return result\r\n  }\r\n  const handleCloseRoleAssigner = () => {\r\n    setOpenRoleAssigner(false);\r\n  }\r\n  const countAllChildrenBelowNode = (node) => {\r\n    let count = [];\r\n    let children = edges.filter(edge => {\r\n      return (edge.source === node)\r\n    }).map(e => e.target)\r\n    children.map(child => {\r\n      if (!count.includes(child)) {\r\n        count = [...count, ...countAllChildrenBelowNode(child)]\r\n      }\r\n    })\r\n    count = [...count, ...children]\r\n    return [...new Set(count)]\r\n  }\r\n\r\n  const countAllChildrenBelowLevel = (level) => {\r\n    let count = [];\r\n    nodes.filter(n => n.level === level).map(n => {\r\n      count = [...count, ...countAllChildrenBelowNode(n.label)]\r\n    })\r\n    return [...new Set(count)];\r\n  }\r\n\r\n  const groupNodesInLevel = (level) => {\r\n    if (level === 0) {\r\n      let _nodes = nodes.filter(node => node.level === level);\r\n      let result = [];\r\n      _nodes.map(node => {\r\n        result.push({node: {...node}, index: _nodes.findIndex(n => n.level === level)})\r\n      })\r\n      return result;\r\n    }\r\n    let result = [];\r\n    let indexes = []\r\n    let nodesInLevel = nodes.filter(node => node.level === level);\r\n    nodesInLevel.map(node => {\r\n      let parents = edges.filter(edge => edge.target === node.label);\r\n      let nodesInLevelAbove = nodes.filter(node => node.level === level - 1);\r\n      let parentIndex = 0;\r\n      parents.map(parent => {\r\n        parentIndex += groupNodesInLevel(level - 1).findIndex(node => node.node.label === parent.source)\r\n      })\r\n      parentIndex = parentIndex / parents.length;\r\n      indexes.push({node: {...node}, index: parentIndex});\r\n    })\r\n    indexes.sort((a, b) => a.index - b.index);\r\n    return indexes;\r\n  }\r\n\r\n  const addNodeWidths = (level) => {\r\n    if (level === 0) {\r\n      const _nodes = groupNodesInLevel(level);\r\n      let result = [];\r\n      _nodes.map(node => {\r\n        result.push({...node, width: (countAllChildrenBelowNode(node.label).length+1)*100/(countAllChildrenBelowLevel(level).length+_nodes.length)})\r\n      })\r\n      return result;\r\n    }\r\n    const _nodes = groupNodesInLevel(level);\r\n    let result = [];\r\n    _nodes.map(node => {\r\n      result.push({...node, width: (countAllChildrenBelowNode(node.node.label).length+1)*100/(countAllChildrenBelowLevel(level).length+_nodes.length)})\r\n    })\r\n    return result;\r\n  }\r\n\r\n  const displayNodesInLevel = (level) => {\r\n    const _nodes = addNodeWidths(level);\r\n    const result = [];\r\n    _nodes.map(index => {\r\n      result.push(<div className=\"node\" id={index.node.id + \"DIv\"} style={{\r\n        width: index.width+\"%\", borderRadius: \"15px\"\r\n      }}>\r\n        <ColorButton\r\n          className=\"rbac__node\"\r\n          id={index.node.id}\r\n          onClick={() => nodeOnClick(index.node)}\r\n          onMouseEnter={() => setHoveredNode(index.node)}\r\n          onMouseLeave={() => setHoveredNode(null)}\r\n          style={{\r\n            color: \"white\", textTransform: 'none',\r\n            zIndex:\"2\"\r\n          }}\r\n        >{index.node.label}</ColorButton>\r\n      </div>)\r\n    })\r\n    return result;\r\n  }\r\n\r\n  const renderNodes = uniqueLevels.map(l => {\r\n    return (<div className=\"row\" id={\"row\" + l} style={{width: `${rowWidth}`}}>\r\n        {displayNodesInLevel(l)}\r\n      </div>)\r\n  })\r\n\r\n  const getEdgeColor = (edge) => {\r\n    if (hoveredEdge != null && hoveredEdge.id === edge.id) {\r\n      return (\"#0d4037\")\r\n    } else if (hoveredNode != null) {\r\n      if (hoveredNode.label === edge.source || hoveredNode.label === edge.target) {\r\n        return (\"#0d4037\")\r\n      }\r\n    }\r\n    return (\"lightgray\")\r\n  }\r\n\r\n  const getZIndex = (edge) => {\r\n    if (hoveredEdge != null && hoveredEdge.id === edge.id) {\r\n      return (1)\r\n    } else if (hoveredNode != null) {\r\n      if (hoveredNode.label === edge.source || hoveredNode.label === edge.target) {\r\n        return (1)\r\n      }\r\n    }\r\n    return (0)\r\n  }\r\n\r\n  const displayEdges = edges.filter((edge) => {return (edge.source !== \"NULL\" && edge.target !== \"NULL\")}).map((edge, index) => {\r\n    // console.log(edge)\r\n    return (<Xarrow\r\n        key={Math.random()}\r\n        id={edge.id}\r\n        // arrow is purposefully kept from end to start due to snowflake use case\r\n        end={edge.source} //can be react ref or an id\r\n        start={edge.target}\r\n        startAnchor=\"top\"\r\n        endAnchor=\"bottom\"\r\n        color={getEdgeColor(edge)}\r\n        strokeWidth={3}\r\n        path=\"curve\"\r\n        zIndex={getZIndex(edge)}\r\n        passProps={{\r\n          cursor: \"pointer\",\r\n          // onMouseEnter: () => setHoveredEdge(edge),\r\n          // onMouseLeave: () => setHoveredEdge(null)\r\n        }}\r\n      />)\r\n  })\r\n\r\n  useEffect(() => {\r\n    var _uniqueLevels = [...new Set(nodes.map(node => node.level))].filter(item => item !== -1).sort()\r\n    var _uniqueLevelsLength = _uniqueLevels.length;\r\n    console.log(\"_uniqueLevels : \",_uniqueLevels)\r\n    setUniqueLevels(_uniqueLevels)\r\n    const arr = nodes.map(n => n.level);\r\n    const counts = arr.reduce((acc, e) => acc.set(e, (acc.get(e) || 0) + 1), new Map());\r\n    var countsArr = [...counts.values()]\r\n    setRowWidth(Math.max(...countsArr) * 236 + 10 + \"px\")\r\n  }, [nodes, edges])\r\n\r\n  const handleCloseViewRole = () => {\r\n    setopenViewRole(false);\r\n    setSelectedNode(null);\r\n    setHoveredNode(null)\r\n  };\r\n\r\n  const displayParentsOrChildrenOrUsers = (nodesArray) => nodesArray.map(node => {\r\n    return (<Typography variant=\"body2\">\r\n        {node}\r\n      </Typography>)\r\n  })\r\n\r\n  return (\r\n    <div id=\"container\" style={{border:\"3px solid grey\"}}>\r\n      {!isLoadingTree ?\r\n          <>\r\n          <div style={{display:\"flex\", justifyContent:\"space-around\"}}>\r\n          <button>Refresh</button>\r\n          <button>Download</button>            \r\n          </div>\r\n            <div className=\"gridContainer\">\r\n              {renderNodes}\r\n              {displayEdges}\r\n            </div>\r\n            {/* <div> */}\r\n              {/* {renderNodes}       */}\r\n              {/* {displayEdges} */}\r\n            {/* </div> */}\r\n          </>\r\n        : <div style={{ display:\"flex\", height:\"100vh\", justifyContent:'center', alignItems:'center'}}>\r\n            <ClipLoader color=\"#B2D942\" size={150} />\r\n          </div>\r\n      }\r\n      <BootstrapDialog\r\n        aria-labelledby=\"customized-dialog-title\"\r\n        PaperProps={{\r\n          style: {\r\n            width: \"800px\", height: \"400px\"\r\n          },\r\n        }}\r\n        onClose={handleCloseViewRole}\r\n        open={openViewRole}\r\n      >\r\n        <StyledBootstrapDialogTitle id=\"customized-dialog-title\" onClose={handleCloseViewRole}>\r\n          {selectedNode && selectedNode.label}\r\n        </StyledBootstrapDialogTitle>\r\n        <DialogContent dividers>\r\n          {nodeDetailsLoading?\r\n          <div style={{ display:\"flex\", justifyContent:'center', alignItems:'center'}}>\r\n            <ClipLoader color=\"#B2D942\" size={150} />\r\n          </div> :\r\n          <>\r\n          <Accordion expanded={expandedAccordion === 'parents'} onChange={handleChangeAccordion('parents')}>\r\n            <AccordionSummary aria-controls=\"panel1d-content\" id=\"panel1d-header\">\r\n              <Typography variant=\"body1\" gutterBottom>Granted to Roles (Parents)\r\n                : {selectedNodeParents.length}</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>{displayParentsOrChildrenOrUsers(selectedNodeParents)}</AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={expandedAccordion === 'children'} onChange={handleChangeAccordion('children')}>\r\n            <AccordionSummary aria-controls=\"panel1d-content\" id=\"panel1d-header\">\r\n              <Typography variant=\"body1\" gutterBottom>Granted Roles (Children)\r\n                : {selectedNodeChildren.length}</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>{displayParentsOrChildrenOrUsers(selectedNodeChildren)}</AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={expandedAccordion === 'users'} onChange={handleChangeAccordion('users')}>\r\n            <AccordionSummary aria-controls=\"panel1d-content\" id=\"panel1d-header\">\r\n              <Typography variant=\"body1\" gutterBottom>Granted Users\r\n                : {selectedNodeUsers.length}</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>{displayParentsOrChildrenOrUsers(selectedNodeUsers)}</AccordionDetails>\r\n          </Accordion>\r\n          </>\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <ModalStyledButton autoFocus onClick={handleCloseViewRole} type=\"cancel\">\r\n            Close\r\n          </ModalStyledButton>\r\n        </DialogActions>\r\n      </BootstrapDialog>\r\n    <BootstrapDialog\r\n      onClose={handleCloseRoleAssigner}\r\n      aria-labelledby=\"customized-dialog-title\"\r\n      open={openRoleAssigner}\r\n      PaperProps={{\r\n        style: {\r\n        },\r\n      }}\r\n    >\r\n      <StyledBootstrapDialogTitle id=\"customized-dialog-title\" onClose={handleCloseRoleAssigner}>\r\n        Assign User to { selectedNode && selectedNode.value }\r\n      </StyledBootstrapDialogTitle>\r\n      <DialogContent dividers>\r\n        <div style={{padding:\"0px 56px\"}}>\r\n          <UserRoleAssigner dispatch={dispatch} allUsers={allUsers} userRoles={userRoles} assignUser={assignUser} revokeUser={revokeUser} selectedNode={selectedNode} />\r\n        </div>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <ModalStyledButton autoFocus onClick={handleCloseRoleAssigner} type=\"cancel\">\r\n          Close\r\n        </ModalStyledButton>\r\n      </DialogActions>\r\n    </BootstrapDialog>\r\n    </div>);\r\n}\r\n\r\nexport default GraphView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}